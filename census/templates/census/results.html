{% extends "base.html" %}
{% load static %}
{% block content %}
<link rel="stylesheet" type="text/css" href= "{% static 'census/index.css' %}" />
<script type="text/javascript" src="/static/census/bootstrap-modal.js"></script>
<link rel="stylesheet" type="text/css" href="{% static 'census/modal.css' %}" />
<script type="text/javascript" src="/static/census/copy_detail_edit_modal.js"></script>

{% if result_list %}
<hr class="style14" width = "50%"></hr>
	<p class="sansserifgrey" align="center">
	Find searches below.
	</p>

<hr class = "style14" width = "50%"></hr>

</br>
<table class="table table-striped" align="center" style="width:70%">
  <thead>
<th colspan="8">Books found:</th>
</thead>
<tbody>
<tr>
<td class="subhead">Title</td>
<td class="subhead">Year Published</td>
<td class="subhead">Edition Number</td>
<td class="subhead">ESTC</td>
<td class="subhead">STC/Wing</td>
<td class="subhead">Owner</td>
<td class="subhead"></td>
{% if user.is_superuser %}
<td class="subhead"></td>
{% endif %}
</tr>
<tr>
{% for copy in result_list %}
<td>{{ copy.issue.edition.title}}</td>
<td>{{ copy.issue.year }}</td>
<td>{{ copy.issue.edition.Edition_number}}</td>
<td>{{ copy.issue.ESTC }}</td>
<td>{{ copy.issue.STC_Wing }}</td>
<td>{{ copy.Owner }}</td>

<td><a class="copy_data" id="data{{copy.id}}" href="#" data-form="{% url 'copy_data' copy.id %}" title="Details" style="font-size:100%">Details</a></td>
<div id="copyModal" class="modal fade" role="dialog"></div>

{% if user.is_superuser %}
<td><a class="update_copy" href="#" data-form="{% url 'update_copy' copy.id %}" title="Edit">Edit</a></td>
<div id="editModal" class="modal fade" role="dialog"></div>
{% endif %}
</tr>
{% endfor %}
</tbody>
</table>
<br>

<div class="pagination">
	  <table class = "pagenavigator" align="center">
		<tr class ="pagenavigator">
			{% if result_list.has_previous %}
			<td class = "hoverspecial"> <a href="?a={{ query1 }}&b={{ query2 }}&c={{ query3 }}&d={{ query4 }}&j={{ category1 }}&k={{ category2 }}&l={{ category3 }}&z={{ category4 }}&page={{ result_list.previous_page_number }}" class="paginator"><</a></td>
			{% endif %}

		{% for page in result_list.paginator.page_range %}
			{% if page <= result_list.number|add:"3" %}
				{% if page >= result_list.number|add:"-3" %}
				{% if page == result_list.number %}
					<td class = "currentpage" width="20px">{{ page }}</td>
				{% else %}
					<td class="pagenavigator" width="20px"> <a href = "?a={{ query1 }}&b={{ query2 }}&c={{ query3 }}&d={{ query4 }}&j={{ category1 }}&k={{ category2 }}&l={{ category3 }}&z={{ category4 }}&page={{ page }}" class="paginator">{{ page }}</td>
				{% endif %}
				{% endif %}

			{% endif %}
		{% endfor %}

			{% if result_list.has_next %}
			 <td class = "hoverspecial">	<a href="?a={{ query1 }}&b={{ query2 }}&c={{ query3 }}&d={{ query4 }}&j={{ category1 }}&k={{ category2 }}&l={{ category3 }}&z={{ category4 }}&page={{ result_list.next_page_number }}" class="paginator">></a></td>
			{% endif %}
		</tr>
	</table>
	<!-- <p align="center"> Pages generated: {{ result_list.paginator.num_pages }} </p> -->
</div>
<br>
<br>
{%else%}
<hr class="style14" width = "50%"></hr>
	<p class="sansserifgrey" align="center">
	No matches were found.<br> Did you misspell your query?
	</p>
<hr class="style14" width = "50%"></hr>
</div>
{% endif %}
</div>
{% endblock content %}
